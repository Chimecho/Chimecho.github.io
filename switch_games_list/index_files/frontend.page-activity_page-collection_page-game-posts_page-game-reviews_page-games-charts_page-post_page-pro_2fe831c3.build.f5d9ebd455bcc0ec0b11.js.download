(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1657:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var a,o,i,r,s=n(3),c=n.n(s),m=n(7),l=n.n(m),u=n(14),d=n.n(u),p=n(19),h=n.n(p),f=n(17),v=n.n(f),_=n(16),k=n.n(_),w=n(18),C=n.n(w),E=n(6),y=n.n(E),N=n(4),g=n.n(N),b=n(1),x=n.n(b),S=(n(0),n(24)),L=n(11),R=n.n(L),I=n(1693),P=n.n(I),F=n(10),M=n(25),T=n(21),U=n(149),z=n(56),O=(n(67),n(58),n(1373),x.a.createElement(U.b,{size:"medium",kind:"fill-inline"},x.a.createElement(F.c,{id:"shared.input_comment_button"}))),B=x.a.createElement("div",{className:"input-comment__help-text"},x.a.createElement(F.c,{id:"shared.input_comment_help_text"})),D=(a=Object(S.connect)(function(e){return{size:e.app.size,currentUser:e.currentUser}}),Object(F.g)(o=a((r=i=function(e){function t(e){var n;d()(this,t),n=v()(this,k()(t).call(this,e)),g()(y()(y()(n)),"handleSubmit",function(e){e.preventDefault();var t=n.props.onSubmit,a=n.state.value;"function"==typeof t&&t(a),n.setState({value:""})}),g()(y()(y()(n)),"handleChange",function(e){n.setState({value:e.target.value})}),g()(y()(y()(n)),"handleFocus",function(){(0,n.props.dispatch)(Object(T.U)()).then(l()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("keydown",n.handleKeydown);case 1:case"end":return e.stop()}},e,this)}))),n.setState({isFocus:!0})}),g()(y()(y()(n)),"handleBlur",function(){window.removeEventListener("keydown",n.handleKeydown),n.setState({isFocus:!1})}),g()(y()(y()(n)),"handleKeydown",function(e){(e.key&&"Enter"===e.key||13===e.keyCode)&&!e.shiftKey&&n.handleSubmit(e)});var a=e.value;return n.ref={},n.state={value:a,isFocus:!1},n}return C()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.autoFocus;P()(this.ref.input),t&&setTimeout(function(){e.ref.input.focus()},20)}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout(function(){P.a.update(e.ref.input)},100)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"getClassName",value:function(){var e,t=this.props,n=t.className,a=t.kind;return R()("input-comment",(e={},g()(e,"input-comment_".concat(a),a),g()(e,n,n),e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.intl,a=t.size,o=t.currentUser,i=t.placeholder,r=this.state.value,s=n.formatMessage({id:i||"shared.input_comment_placeholder"});return x.a.createElement("div",{className:this.getClassName()},x.a.createElement("form",{className:"input-comment__form-wrapper",onSubmit:this.handleSubmit},x.a.createElement("div",{className:"input-comment__form"},x.a.createElement(z.a,{className:R()("input-comment__avatar",{"input-comment__focus":!this.state.isFocus}),size:40,src:o.avatar,profile:o}),x.a.createElement("textarea",{className:"input-comment__field",placeholder:s,value:r,maxLength:3e3,rows:"1",ref:function(t){e.ref.input=t},onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange})),M.a.isPhoneSize({size:a})&&r.length>0&&O),M.a.isDesktopSize({size:a})&&r.length>0&&B)}}]),t}(b.Component),g()(i,"defaultProps",{kind:void 0,autoFocus:!1,onSubmit:void 0,className:"",placeholder:"",value:""}),o=r))||o)||o)},1659:function(e,t,n){"use strict";n.d(t,"a",function(){return ne});var a,o,i,r=n(3),s=n.n(r),c=n(7),m=n.n(c),l=n(14),u=n.n(l),d=n(19),p=n.n(d),h=n(17),f=n.n(h),v=n(16),_=n.n(v),k=n(18),w=n.n(k),C=n(6),E=n.n(C),y=n(4),N=n.n(y),g=n(1),b=n.n(g),x=(n(0),n(24)),S=n(15),L=n.n(S),R=n(11),I=n.n(R),P=n(30),F=n.n(P),M=n(348),T=n.n(M),U=n(10),z=n(1751),O=n.n(z),B=n(1723),D=n.n(B),j=(n(58),n(21)),A=(n(67),n(5)),K=n(70),H=n(1661),Y=n(1669),J=n(56),W=n(1657),q=n(209),V=n(25),$=(n(1375),{className:"",onRemove:void 0,onCreate:void 0,onEdit:void 0,onLoadReplies:void 0,onLike:void 0,onReplyLink:void 0,child:!1,reply:!1,showReply:!0,showAvatar:!0,showMenu:!0,showHeader:!0,showArrow:!1,arrowContent:b.a.createElement(F.a,{svg:D.a,className:"comment__arrow-icon"}),showLikes:!0,textExpanded:!1,showRepliesCount:!0,background:void 0,showComment:void 0,user:void 0}),G=b.a.createElement(Y.a,{className:"comment__menu-button",kind:"inline"}),Q=b.a.createElement(U.c,{id:"shared.comment_edit"}),X=b.a.createElement(U.c,{id:"shared.comment_delete"}),Z=b.a.createElement("div",{className:"comment__obscurer"}),ee=b.a.createElement(U.c,{id:"shared.comment_reply"}),te=b.a.createElement(F.a,{svg:D.a,className:"comment__reply-count-icon"}),ne=Object(x.connect)(function(e){return{routing:e.routing,showComment:e.app.showComment,currentUserId:e.currentUser.id}})((i=o=function(e){function t(e){var n;u()(this,t),n=f()(this,_()(t).call(this,e)),N()(E()(E()(n)),"closeReplyInput",function(e){var t="touchend"===e.type&&e.touches.length>0?e.touches[0]:e.target;n.rootEl.contains(t)||n.setState({reply:!1})}),N()(E()(E()(n)),"handleCreate",function(e){if(e){var t=n.props,a=t.comment,o=t.onCreate;"function"==typeof o&&o(a,e),n.setState({reply:!1})}}),N()(E()(E()(n)),"handleEdit",function(e){if(e){var t=n.props,a=t.comment,o=t.onEdit;"function"==typeof o&&o(a,e).then(function(){n.setState({edit:!1})})}}),N()(E()(E()(n)),"handleRemove",function(){var e=n.props,t=e.comment,a=e.onRemove;"function"==typeof a&&a(t)}),N()(E()(E()(n)),"handleLoadReplies",function(){var e=n.props,t=e.comment,a=e.onLoadReplies;"function"==typeof a&&a(t),n.setState({showRepliesCount:!1})}),N()(E()(E()(n)),"handleToggleLike",function(){var e=n.props,t=e.dispatch,a=e.comment,o=e.onLike,i=n.state,r=i.userLike,c=i.likesCount;t(Object(j.U)()).then(m()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"function"==typeof o&&o(a,!r),n.setState({userLike:!r,likesCount:r?c-1:c+1});case 2:case"end":return e.stop()}},e,this)})))}),N()(E()(E()(n)),"edit",function(){n.setState({edit:!0})}),N()(E()(E()(n)),"reply",function(){var e=n.props,t=e.dispatch,a=e.comment,o=e.showReply,i=e.onReplyLink;t(Object(j.U)()).then(m()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o&&"function"==typeof i?i(a):n.setState({reply:!0});case 1:case"end":return e.stop()}},e,this)})))}),N()(E()(E()(n)),"expandText",function(){n.setState({textExpanded:!0})}),N()(E()(E()(n)),"renderMenuButton",function(){return G}),N()(E()(E()(n)),"renderMenuContent",function(){var e=n.props,t=e.currentUserId,a=e.comment.user;return b.a.createElement("div",{className:"comment__menu-content"},t===a.id&&b.a.createElement("div",{className:"comment__menu-content-item",onClick:n.edit,role:"button",tabIndex:0},Q),b.a.createElement(H.a,{className:"comment__menu-content-item",onConfirm:n.handleRemove},X))});var a=e.comment,o=void 0===a?{}:a,i=e.reply,r=e.showRepliesCount,c=e.textExpanded,l=o.likes_count,d=void 0===l?0:l,p=o.user_like,h=void 0!==p&&p;return n.state={likesCount:d,userLike:h,reply:i,edit:!1,showRepliesCount:r,textExpanded:c},n}return w()(t,e),p()(t,[{key:"componentDidMount",value:function(){window.document.body.addEventListener("click",this.closeReplyInput,!0);var e=this.props,t=e.routing.locationBeforeTransitions.query,n=e.comment;if(t&&n.id){var a=t.comment;a&&((a=JSON.parse(decodeURIComponent(a))).id===n.id&&this.setState({showRepliesCount:!1}),this.showComment())}}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.showComment&&!e.showComment&&setTimeout(function(){t.showComment()},100)}},{key:"componentWillUnmount",value:function(){window.document.body.removeEventListener("click",this.closeReplyInput,!0)}},{key:"getClassName",value:function(){var e=this.props,t=e.className,n=e.child;return I()("comment",N()({comment_child:n},t,t))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.comment.id&&!this.props.comment.id){var t=e.comment,n=void 0===t?{}:t,a=n.likes_count,o=void 0===a?0:a,i=n.user_like,r=void 0!==i&&i;this.setState({likesCount:o,userLike:r})}}},{key:"showComment",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.routing.locationBeforeTransitions.hash,o=t.comment,i=t.showComment;if(i){var r=a.replace("#","");r&&+r===o.id&&setTimeout(function(){e.setState({reply:!0},function(){n(Object(j.F)())})},500)}}},{key:"renderMenu",value:function(){var e=this.props,t=e.currentUserId,n=e.comment,a=n.user,o=n.can_delete;return t===a.id||o?b.a.createElement("div",{className:"comment__menu"},b.a.createElement(K.a,{renderButton:this.renderMenuButton,renderContent:this.renderMenuContent,containerClassName:"comment__menu-dropdown-container",kind:"menu"})):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.comment,a=t.child,o=t.showReply,i=t.showAvatar,r=t.showMenu,s=t.showHeader,c=t.showArrow,m=t.arrowContent,l=t.showLikes,u=t.background,d=t.user,p=n.user,h=n.text,f=void 0===h?"":h,v=n.text_raw,_=void 0===v?"":v,k=n.created,w=void 0===k?Date.now():k,C=n.comments_count,E=p||d,y=this.state,N=y.likesCount,g=y.userLike,x=y.edit,S=y.reply,R=y.showRepliesCount,I=y.textExpanded,P=new Date(w),M="".concat(P.getFullYear(),"-").concat(P.getMonth()+1,"-").concat(P.getDate());return b.a.createElement("div",{id:n.id,className:this.getClassName(),itemType:"http://schema.org/Comment",itemProp:"comment",itemScope:!0,ref:function(t){e.rootEl=t}},u&&b.a.createElement("div",{className:"comment__background",style:{backgroundImage:"url(".concat(u,")")}}),u&&Z,x?b.a.createElement(W.a,{value:_,onSubmit:this.handleEdit}):b.a.createElement("div",{className:"comment__block"},E&&b.a.createElement("div",{itemType:"http://schema.org/Person",itemProp:"author",itemScope:!0},b.a.createElement("meta",{itemProp:"name",content:E.full_name||E.username}),b.a.createElement("meta",{itemProp:"url",content:A.a.profile(E.slug)}),b.a.createElement("meta",{itemProp:"image",content:E.avatar})),i&&b.a.createElement(L.a,{className:"comment__avatar-link",to:{pathname:A.a.profile(E.slug),state:E},href:A.a.profile(E.slug)},b.a.createElement(J.a,{className:"comment__avatar",size:40,src:E.avatar,profile:E})),b.a.createElement("div",{className:"comment__body"},s&&b.a.createElement("div",{className:"comment__body-header"},b.a.createElement("div",{className:"comment__meta"},b.a.createElement(L.a,{className:"comment__user-link",to:{pathname:A.a.profile(E.slug),state:E},href:A.a.profile(E.slug)},V.a.getName(E,20)),b.a.createElement("div",{itemProp:"datePublished",dateTime:M,className:"comment__date"},b.a.createElement(q.a,{date:P,relative:7}))),r&&b.a.createElement("div",null,this.renderMenu())),c&&m,f&&I&&b.a.createElement("div",{className:"comment__text",itemProp:"text",dangerouslySetInnerHTML:{__html:f}}),f&&!I&&b.a.createElement(T.a,{containerClassName:"comment__text",line:3,truncateText:"…",text:_.replace(/<\/?[^>]+(>|$)/g," "),itemProp:"text",textTruncateChild:b.a.createElement("span",{className:"comment__text-more",onClick:this.expandText,role:"button",tabIndex:0},"more")}),b.a.createElement("div",{className:"comment__controls"},b.a.createElement("div",{className:"comment__reply"},o&&!S&&b.a.createElement("div",{className:"comment__reply-button",onClick:this.reply,role:"button",tabIndex:0},ee),C>0&&R&&b.a.createElement("div",{className:"comment__reply-count",onClick:this.handleLoadReplies,role:"button",tabIndex:0},te,b.a.createElement(U.c,{id:"shared.comment_reply_count",values:{count:C}}))),b.a.createElement("div",{className:"comment__likes"},l&&N>0&&b.a.createElement("div",{className:"comment__likes-count"},N),l&&b.a.createElement("div",{className:"comment__like",onClick:this.handleToggleLike,role:"button",tabIndex:0},b.a.createElement(F.a,{svg:O.a,className:"comment__like-icon ".concat(g?"comment__like-icon_active":"")})))))),S&&b.a.createElement(W.a,{kind:a?"reply-child":"reply",value:"",onSubmit:this.handleCreate,autoFocus:!0}))}}]),t}(g.Component),N()(o,"defaultProps",$),a=i))||a},1661:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var a=n(14),o=n.n(a),i=n(19),r=n.n(i),s=n(17),c=n.n(s),m=n(16),l=n.n(m),u=n(18),d=n.n(u),p=n(6),h=n.n(p),f=n(4),v=n.n(f),_=n(1),k=n.n(_),w=n(0),C=n.n(w),E=n(11),y=n.n(E),N=n(10),g=n(1688),b=(n(1361),C.a.func,C.a.string,C.a.node,{onConfirm:void 0,children:void 0,className:""}),x=k.a.createElement("div",{className:"confirm-content__title"},k.a.createElement(N.c,{id:"shared.confirm_title"})),S=function(e){function t(e){var n;return o()(this,t),n=c()(this,l()(t).call(this,e)),v()(h()(h()(n)),"showConfirm",function(){n.setState({showConfirm:!0})}),v()(h()(h()(n)),"hideConfirm",function(){n.setState({showConfirm:!1})}),v()(h()(h()(n)),"handleConfirm",function(){var e=n.props.onConfirm;"function"==typeof e&&e()}),n.state={showConfirm:!1},n}return d()(t,e),r()(t,[{key:"getClassName",value:function(){var e=this.props.className,t=this.state.showConfirm;return y()("confirm",v()({"not-hover":t},e,e))}},{key:"render",value:function(){var e=this.state.showConfirm;return k.a.createElement("div",{className:this.getClassName()},e?k.a.createElement("div",{className:"confirm-content"},x,k.a.createElement("div",{className:"confirm-content__buttons"},k.a.createElement(g.a,{isYes:!0,onClick:this.handleConfirm}),k.a.createElement(g.a,{onClick:this.hideConfirm}))):k.a.createElement("div",{className:"confirm-title",onClick:this.showConfirm,role:"button",tabIndex:0},this.props.children))}}]),t}(_.Component);v()(S,"defaultProps",b)},1669:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n(14),o=n.n(a),i=n(19),r=n.n(i),s=n(17),c=n.n(s),m=n(16),l=n.n(m),u=n(18),d=n.n(u),p=n(6),h=n.n(p),f=n(4),v=n.n(f),_=n(1),k=n.n(_),w=n(0),C=n.n(w),E=n(11),y=n.n(E),N=(n(1374),C.a.func,C.a.oneOf(["inline","outline"]),C.a.string,{onClick:void 0,kind:void 0,className:""}),g=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=c()(this,(e=l()(t)).call.apply(e,[this].concat(i))),v()(h()(h()(n)),"handleClick",function(e){var t=n.props.onClick;"function"==typeof t&&(e.preventDefault(),e.stopPropagation(),t())}),n}return d()(t,e),r()(t,[{key:"getClassName",value:function(){var e,t=this.props,n=t.kind,a=t.className;return y()("menu-button",(e={},v()(e,"menu-button_".concat(n),n),v()(e,a,a),e))}},{key:"render",value:function(){return k.a.createElement("div",{className:this.getClassName(),onClick:this.handleClick,role:"button",tabIndex:0},"•••")}}]),t}(_.Component);v()(g,"defaultProps",N)},1682:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n(14),o=n.n(a),i=n(19),r=n.n(i),s=n(17),c=n.n(s),m=n(16),l=n.n(m),u=n(18),d=n.n(u),p=n(4),h=n.n(p),f=n(1),v=n.n(f),_=(n(0),n(11)),k=n.n(_),w=(n(1376),{className:"",children:void 0,useId:!1}),C=function(e){function t(){return o()(this,t),c()(this,l()(t).apply(this,arguments))}return d()(t,e),r()(t,[{key:"render",value:function(){return this.props.useId?v.a.createElement("div",{id:"comments",className:this.className},this.props.children):v.a.createElement("div",{className:this.className},this.props.children)}},{key:"className",get:function(){var e=this.props.className;return k()("comments-list",h()({},e,e))}}]),t}(f.Component);h()(C,"defaultProps",w)},1684:function(e,t,n){"use strict";var a=n(1),o=n.n(a),i=n(0),r=n.n(i),s=(r.a.string.isRequired,r.a.string,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/(<br>){3,}/g,"<br>").replace("<a href","<a target='_blank' href")}),c=function(e){var t=e.content,n=e.className;return o.a.createElement("div",{className:n,itemProp:"text",dangerouslySetInnerHTML:{__html:s(t)}})};c.defaultProps={className:""},t.a=c},1688:function(e,t,n){"use strict";(function(e){var a=n(1),o=n.n(a),i=(n(0),n(51)),r=n(76),s=n(11),c=n.n(s),m=n(28),l=(n(1344),Object(i.a)(Object(r.hot)(e))),u=o.a.createElement(m.a,{id:"shared.confirm_y"}),d=o.a.createElement(m.a,{id:"shared.confirm_n"}),p=function(e){var t=e.className,n=e.isYes,a=e.onClick;return n?o.a.createElement("div",{className:c()("confirm-button__button","confirm-button__button_y",t),onClick:a,role:"button",tabIndex:0},u):o.a.createElement("div",{className:c()("confirm-button__button","confirm-button__button_n",t),onClick:a,role:"button",tabIndex:0},d)};p.defaultProps={className:"",isYes:!1,onClick:function(){}};var h=l(p);t.a=h}).call(this,n(122)(e))},1723:function(e,t){e.exports='<svg width="18" height="16" viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.063 12.733V16L18 9.61l-6.937-6.39v2.939C4.333 5.98.909.795.874.742L.396 0 .225.866C.075 1.622 0 2.399 0 3.176c0 5.886 4.127 9.44 11.063 9.557zM.796 1.815c1.262 1.526 4.817 5.063 10.623 5.063h.357v-2.03l5.17 4.762-5.17 4.762v-2.35h-.357C4.615 12.021.713 8.796.713 3.175c0-.456.028-.91.083-1.361z" fill="#FFF"/></svg>'},1751:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="12" viewBox="0 0 14 12"><path fill="none" stroke="#FFF" d="M9.743 1A3.25 3.25 0 0 0 7 2.508 3.25 3.25 0 0 0 4.257 1 3.267 3.267 0 0 0 1 4.276C1 6.414 2.577 7.609 4.154 8.85A102.22 102.22 0 0 0 7 11s1.442-1.044 2.846-2.15C11.423 7.61 13 6.415 13 4.277A3.267 3.267 0 0 0 9.743 1z"/></svg>'}}]);
//# sourceMappingURL=frontend.page-activity~page-collection~page-game-posts~page-game-reviews~page-games-charts~page-post~page-pro~2fe831c3.build.f5d9ebd455bcc0ec0b11.js.map